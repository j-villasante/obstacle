{"version":3,"sources":["node_modules/browser-pack/_prelude.js","static/src/Ball.js","static/src/BallController.js","static/src/app.js","static/src/utils/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","class Ball {\n    constructor (context, x, y, r) {\n        this.x = x\n        this.y = y\n        this.radius = r\n        this.color = this.getRandomColor()\n        this.ctx = context\n        this.loading = true\n        this.setLoadingState()\n    }\n\n    getRandomColor () {\n        return '#000000'.replace(/0/g, () => (~~(Math.random() * 16)).toString(16))\n    }\n\n    setSpeed (vx, vy) {\n        this.vx = vx\n        this.vy = vy\n    }\n\n    get centerPoint () {\n        return {\n            x: this.x,\n            y: this.y\n        }\n    }\n\n    setPosition (x, y) {\n        this.x = x\n        this.y = y\n    }\n\n    move () {\n        if (this.loading) return\n        this.x += this.vx\n        this.y += this.vy\n    }\n\n    setLoadingState () {\n        setTimeout(() => {\n            this.loading = false\n        }, 1000)\n    }\n\n    draw () {\n        this.ctx.beginPath()\n        this.ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true)\n        this.ctx.closePath()\n        this.ctx.fillStyle = this.color\n        this.ctx.fill()\n    }\n}\n\nmodule.exports = Ball\n","const Ball = require('./Ball.js')\nconst utils = require('./utils')\n\nclass BallController {\n    constructor (context, canvas) {\n        this.ctx = context\n        this.canvas = canvas\n        this.balls = []\n    }\n\n    addBall (quantity = 1) {\n        let i = 0\n        while (i < quantity) {\n            let randRadius = utils.getRandomInt(10, 25)\n            let randomX = utils.getRandomInt(0 + randRadius, this.canvas.width - randRadius)\n            let randomY = utils.getRandomInt(0 + randRadius, this.canvas.height - randRadius)\n            let randSpeedX = utils.getRandomInt(3, 8)\n            let randSpeedY = utils.getRandomInt(3, 8)\n            let ball = new Ball(this.ctx, randomX, randomY, randRadius)\n            ball.setSpeed(randSpeedX, randSpeedY)\n            this.balls.push(ball)\n            i++\n        }\n    }\n\n    moveBalls () {\n        for (let ball of this.balls) {\n            if (ball.y + ball.vy + ball.radius > this.canvas.height || ball.y + ball.vy - ball.radius < 0) {\n                ball.vy = -ball.vy\n            }\n\n            if (ball.x + ball.vx + ball.radius > this.canvas.width || ball.x + ball.vx - ball.radius < 0) {\n                ball.vx = -ball.vx\n            }\n            ball.move()\n        }\n    }\n\n    detectColision () {\n        for (let ball of this.balls) {\n            let distance = utils.getDistanceBewteenPoints(this.staticBall.centerPoint, ball.centerPoint)\n            if (!ball.loading && distance <= ball.radius + this.staticBall.radius) {\n                return true\n            }\n        }\n        return false\n    }\n\n    createStaticBall () {\n        this.staticBall = new Ball(this.ctx, 25, 25, 15)\n    }\n\n    moveBallOnMouseMove (e) {\n        let rect = this.canvas.getBoundingClientRect()\n        this.staticBall.setPosition(e.clientX - rect.left, e.clientY - rect.top)\n    }\n\n    render () {\n        for (let ball of this.balls) {\n            ball.draw()\n        }\n        this.staticBall.draw()\n    }\n}\n\nmodule.exports = BallController\n","const BallController = require('./BallController.js')\n\nclass Main {\n    constructor () {\n        this.canvas = document.getElementById('canvas')\n        this.canvas.width = document.body.clientWidth\n        this.canvas.height = document.body.clientHeight - document.getElementById('content').offsetHeight\n        this.spanScore = document.getElementById('span-balls')\n        this.ctx = this.canvas.getContext('2d')\n        this.ballCount = 3\n        this.increment = 1\n        this.runningTime = 0\n        this.running = false\n    }\n\n    setNewBallsController () {\n        this.controller = new BallController(this.ctx, this.canvas)\n    }\n\n    animate () {\n        this.ctx.fillStyle = 'rgba(255, 255, 255, 0.6)'\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\n        this.controller.moveBalls()\n        this.controller.render()\n        if (this.controller.detectColision()) {\n            this.running = false\n            this.ctx.fillStyle = 'rgba(255, 255, 255, 0.8)'\n            this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\n            this.ctx.fillStyle = '#FF0000'\n            this.ctx.font = '48px serif'\n            this.ctx.fillText('Game over', 0, 100)\n        } else {\n            window.requestAnimationFrame(() => this.animate())\n        }\n    }\n\n    runTimer () {\n        setTimeout(() => {\n            this.runningTime += 0.5\n            this.spanScore.innerHTML = this.runningTime * 2\n            if (this.running) {\n                this.runTimer()\n            }\n        }, 500)\n    }\n\n    addBallsInterval (interval) {\n        setTimeout(() => {\n            this.controller.addBall(this.increment)\n            this.ballCount += this.increment\n            this.increment++\n            if (this.running) {\n                this.addBallsInterval(interval)\n            }\n        }, interval)\n    }\n\n    startGame () {\n        if (this.running) return\n        this.running = true\n        this.setNewBallsController()\n        this.controller.addBall(this.ballCount)\n        this.controller.createStaticBall()\n        this.runTimer()\n        this.addBallsInterval(5000)\n        this.animate(this.controller)\n    }\n\n    restart () {\n        this.ballCount = 3\n        this.increment = 1\n        this.runningTime = 0\n        this.spanScore.innerHTML = 0\n        this.startGame()\n    }\n\n    start () {\n        this.startGame()\n        this.canvas.addEventListener('mousemove', e => this.controller.moveBallOnMouseMove(e))\n    }\n}\n\nlet main = new Main()\nmain.start()\ndocument.getElementById('btn-restart').addEventListener('click', e => main.restart())\n","class Utils {\n    /**\n     * Returns a random number between min (inclusive) and max (exclusive)\n     */\n    getRandomArbitrary (min, max) {\n        return Math.random() * (max - min) + min\n    }\n\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    getRandomInt (min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min\n    }\n\n    getDistanceBewteenPoints (a, b) {\n        return Math.hypot(a.x - b.x, a.y - b.y)\n    }\n}\n\nmodule.exports = new Utils()\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzdGF0aWMvc3JjL0JhbGwuanMiLCJzdGF0aWMvc3JjL0JhbGxDb250cm9sbGVyLmpzIiwic3RhdGljL3NyYy9hcHAuanMiLCJzdGF0aWMvc3JjL3V0aWxzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImNsYXNzIEJhbGwge1xuICAgIGNvbnN0cnVjdG9yIChjb250ZXh0LCB4LCB5LCByKSB7XG4gICAgICAgIHRoaXMueCA9IHhcbiAgICAgICAgdGhpcy55ID0geVxuICAgICAgICB0aGlzLnJhZGl1cyA9IHJcbiAgICAgICAgdGhpcy5jb2xvciA9IHRoaXMuZ2V0UmFuZG9tQ29sb3IoKVxuICAgICAgICB0aGlzLmN0eCA9IGNvbnRleHRcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZVxuICAgICAgICB0aGlzLnNldExvYWRpbmdTdGF0ZSgpXG4gICAgfVxuXG4gICAgZ2V0UmFuZG9tQ29sb3IgKCkge1xuICAgICAgICByZXR1cm4gJyMwMDAwMDAnLnJlcGxhY2UoLzAvZywgKCkgPT4gKH5+KE1hdGgucmFuZG9tKCkgKiAxNikpLnRvU3RyaW5nKDE2KSlcbiAgICB9XG5cbiAgICBzZXRTcGVlZCAodngsIHZ5KSB7XG4gICAgICAgIHRoaXMudnggPSB2eFxuICAgICAgICB0aGlzLnZ5ID0gdnlcbiAgICB9XG5cbiAgICBnZXQgY2VudGVyUG9pbnQgKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRQb3NpdGlvbiAoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSB4XG4gICAgICAgIHRoaXMueSA9IHlcbiAgICB9XG5cbiAgICBtb3ZlICgpIHtcbiAgICAgICAgaWYgKHRoaXMubG9hZGluZykgcmV0dXJuXG4gICAgICAgIHRoaXMueCArPSB0aGlzLnZ4XG4gICAgICAgIHRoaXMueSArPSB0aGlzLnZ5XG4gICAgfVxuXG4gICAgc2V0TG9hZGluZ1N0YXRlICgpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICB9LCAxMDAwKVxuICAgIH1cblxuICAgIGRyYXcgKCkge1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKVxuICAgICAgICB0aGlzLmN0eC5hcmModGhpcy54LCB0aGlzLnksIHRoaXMucmFkaXVzLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSlcbiAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKClcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5jb2xvclxuICAgICAgICB0aGlzLmN0eC5maWxsKClcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFsbFxuIiwiY29uc3QgQmFsbCA9IHJlcXVpcmUoJy4vQmFsbC5qcycpXG5jb25zdCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKVxuXG5jbGFzcyBCYWxsQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IgKGNvbnRleHQsIGNhbnZhcykge1xuICAgICAgICB0aGlzLmN0eCA9IGNvbnRleHRcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXNcbiAgICAgICAgdGhpcy5iYWxscyA9IFtdXG4gICAgfVxuXG4gICAgYWRkQmFsbCAocXVhbnRpdHkgPSAxKSB7XG4gICAgICAgIGxldCBpID0gMFxuICAgICAgICB3aGlsZSAoaSA8IHF1YW50aXR5KSB7XG4gICAgICAgICAgICBsZXQgcmFuZFJhZGl1cyA9IHV0aWxzLmdldFJhbmRvbUludCgxMCwgMjUpXG4gICAgICAgICAgICBsZXQgcmFuZG9tWCA9IHV0aWxzLmdldFJhbmRvbUludCgwICsgcmFuZFJhZGl1cywgdGhpcy5jYW52YXMud2lkdGggLSByYW5kUmFkaXVzKVxuICAgICAgICAgICAgbGV0IHJhbmRvbVkgPSB1dGlscy5nZXRSYW5kb21JbnQoMCArIHJhbmRSYWRpdXMsIHRoaXMuY2FudmFzLmhlaWdodCAtIHJhbmRSYWRpdXMpXG4gICAgICAgICAgICBsZXQgcmFuZFNwZWVkWCA9IHV0aWxzLmdldFJhbmRvbUludCgzLCA4KVxuICAgICAgICAgICAgbGV0IHJhbmRTcGVlZFkgPSB1dGlscy5nZXRSYW5kb21JbnQoMywgOClcbiAgICAgICAgICAgIGxldCBiYWxsID0gbmV3IEJhbGwodGhpcy5jdHgsIHJhbmRvbVgsIHJhbmRvbVksIHJhbmRSYWRpdXMpXG4gICAgICAgICAgICBiYWxsLnNldFNwZWVkKHJhbmRTcGVlZFgsIHJhbmRTcGVlZFkpXG4gICAgICAgICAgICB0aGlzLmJhbGxzLnB1c2goYmFsbClcbiAgICAgICAgICAgIGkrK1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbW92ZUJhbGxzICgpIHtcbiAgICAgICAgZm9yIChsZXQgYmFsbCBvZiB0aGlzLmJhbGxzKSB7XG4gICAgICAgICAgICBpZiAoYmFsbC55ICsgYmFsbC52eSArIGJhbGwucmFkaXVzID4gdGhpcy5jYW52YXMuaGVpZ2h0IHx8IGJhbGwueSArIGJhbGwudnkgLSBiYWxsLnJhZGl1cyA8IDApIHtcbiAgICAgICAgICAgICAgICBiYWxsLnZ5ID0gLWJhbGwudnlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJhbGwueCArIGJhbGwudnggKyBiYWxsLnJhZGl1cyA+IHRoaXMuY2FudmFzLndpZHRoIHx8IGJhbGwueCArIGJhbGwudnggLSBiYWxsLnJhZGl1cyA8IDApIHtcbiAgICAgICAgICAgICAgICBiYWxsLnZ4ID0gLWJhbGwudnhcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhbGwubW92ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZXRlY3RDb2xpc2lvbiAoKSB7XG4gICAgICAgIGZvciAobGV0IGJhbGwgb2YgdGhpcy5iYWxscykge1xuICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gdXRpbHMuZ2V0RGlzdGFuY2VCZXd0ZWVuUG9pbnRzKHRoaXMuc3RhdGljQmFsbC5jZW50ZXJQb2ludCwgYmFsbC5jZW50ZXJQb2ludClcbiAgICAgICAgICAgIGlmICghYmFsbC5sb2FkaW5nICYmIGRpc3RhbmNlIDw9IGJhbGwucmFkaXVzICsgdGhpcy5zdGF0aWNCYWxsLnJhZGl1cykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgY3JlYXRlU3RhdGljQmFsbCAoKSB7XG4gICAgICAgIHRoaXMuc3RhdGljQmFsbCA9IG5ldyBCYWxsKHRoaXMuY3R4LCAyNSwgMjUsIDE1KVxuICAgIH1cblxuICAgIG1vdmVCYWxsT25Nb3VzZU1vdmUgKGUpIHtcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICB0aGlzLnN0YXRpY0JhbGwuc2V0UG9zaXRpb24oZS5jbGllbnRYIC0gcmVjdC5sZWZ0LCBlLmNsaWVudFkgLSByZWN0LnRvcClcbiAgICB9XG5cbiAgICByZW5kZXIgKCkge1xuICAgICAgICBmb3IgKGxldCBiYWxsIG9mIHRoaXMuYmFsbHMpIHtcbiAgICAgICAgICAgIGJhbGwuZHJhdygpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0aWNCYWxsLmRyYXcoKVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCYWxsQ29udHJvbGxlclxuIiwiY29uc3QgQmFsbENvbnRyb2xsZXIgPSByZXF1aXJlKCcuL0JhbGxDb250cm9sbGVyLmpzJylcblxuY2xhc3MgTWFpbiB7XG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKVxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGhcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQgLSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpLm9mZnNldEhlaWdodFxuICAgICAgICB0aGlzLnNwYW5TY29yZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGFuLWJhbGxzJylcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG4gICAgICAgIHRoaXMuYmFsbENvdW50ID0gM1xuICAgICAgICB0aGlzLmluY3JlbWVudCA9IDFcbiAgICAgICAgdGhpcy5ydW5uaW5nVGltZSA9IDBcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2VcbiAgICB9XG5cbiAgICBzZXROZXdCYWxsc0NvbnRyb2xsZXIgKCkge1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgQmFsbENvbnRyb2xsZXIodGhpcy5jdHgsIHRoaXMuY2FudmFzKVxuICAgIH1cblxuICAgIGFuaW1hdGUgKCkge1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpJ1xuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KVxuICAgICAgICB0aGlzLmNvbnRyb2xsZXIubW92ZUJhbGxzKClcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLnJlbmRlcigpXG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXIuZGV0ZWN0Q29saXNpb24oKSkge1xuICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2VcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCknXG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KVxuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJyNGRjAwMDAnXG4gICAgICAgICAgICB0aGlzLmN0eC5mb250ID0gJzQ4cHggc2VyaWYnXG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsVGV4dCgnR2FtZSBvdmVyJywgMCwgMTAwKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmFuaW1hdGUoKSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJ1blRpbWVyICgpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmdUaW1lICs9IDAuNVxuICAgICAgICAgICAgdGhpcy5zcGFuU2NvcmUuaW5uZXJIVE1MID0gdGhpcy5ydW5uaW5nVGltZSAqIDJcbiAgICAgICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJ1blRpbWVyKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwKVxuICAgIH1cblxuICAgIGFkZEJhbGxzSW50ZXJ2YWwgKGludGVydmFsKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmFkZEJhbGwodGhpcy5pbmNyZW1lbnQpXG4gICAgICAgICAgICB0aGlzLmJhbGxDb3VudCArPSB0aGlzLmluY3JlbWVudFxuICAgICAgICAgICAgdGhpcy5pbmNyZW1lbnQrK1xuICAgICAgICAgICAgaWYgKHRoaXMucnVubmluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQmFsbHNJbnRlcnZhbChpbnRlcnZhbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaW50ZXJ2YWwpXG4gICAgfVxuXG4gICAgc3RhcnRHYW1lICgpIHtcbiAgICAgICAgaWYgKHRoaXMucnVubmluZykgcmV0dXJuXG4gICAgICAgIHRoaXMucnVubmluZyA9IHRydWVcbiAgICAgICAgdGhpcy5zZXROZXdCYWxsc0NvbnRyb2xsZXIoKVxuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuYWRkQmFsbCh0aGlzLmJhbGxDb3VudClcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmNyZWF0ZVN0YXRpY0JhbGwoKVxuICAgICAgICB0aGlzLnJ1blRpbWVyKClcbiAgICAgICAgdGhpcy5hZGRCYWxsc0ludGVydmFsKDUwMDApXG4gICAgICAgIHRoaXMuYW5pbWF0ZSh0aGlzLmNvbnRyb2xsZXIpXG4gICAgfVxuXG4gICAgcmVzdGFydCAoKSB7XG4gICAgICAgIHRoaXMuYmFsbENvdW50ID0gM1xuICAgICAgICB0aGlzLmluY3JlbWVudCA9IDFcbiAgICAgICAgdGhpcy5ydW5uaW5nVGltZSA9IDBcbiAgICAgICAgdGhpcy5zcGFuU2NvcmUuaW5uZXJIVE1MID0gMFxuICAgICAgICB0aGlzLnN0YXJ0R2FtZSgpXG4gICAgfVxuXG4gICAgc3RhcnQgKCkge1xuICAgICAgICB0aGlzLnN0YXJ0R2FtZSgpXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGUgPT4gdGhpcy5jb250cm9sbGVyLm1vdmVCYWxsT25Nb3VzZU1vdmUoZSkpXG4gICAgfVxufVxuXG5sZXQgbWFpbiA9IG5ldyBNYWluKClcbm1haW4uc3RhcnQoKVxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1yZXN0YXJ0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IG1haW4ucmVzdGFydCgpKVxuIiwiY2xhc3MgVXRpbHMge1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSByYW5kb20gbnVtYmVyIGJldHdlZW4gbWluIChpbmNsdXNpdmUpIGFuZCBtYXggKGV4Y2x1c2l2ZSlcbiAgICAgKi9cbiAgICBnZXRSYW5kb21BcmJpdHJhcnkgKG1pbiwgbWF4KSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gKGluY2x1c2l2ZSkgYW5kIG1heCAoaW5jbHVzaXZlKVxuICAgICAqIFVzaW5nIE1hdGgucm91bmQoKSB3aWxsIGdpdmUgeW91IGEgbm9uLXVuaWZvcm0gZGlzdHJpYnV0aW9uIVxuICAgICAqL1xuICAgIGdldFJhbmRvbUludCAobWluLCBtYXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW5cbiAgICB9XG5cbiAgICBnZXREaXN0YW5jZUJld3RlZW5Qb2ludHMgKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguaHlwb3QoYS54IC0gYi54LCBhLnkgLSBiLnkpXG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBVdGlscygpXG4iXX0="}