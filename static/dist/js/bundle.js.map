{"version":3,"sources":["node_modules/browser-pack/_prelude.js","static/src/Ball.js","static/src/BallController.js","static/src/app.js","static/src/utils/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","class Ball {\n    constructor (context, x, y, r) {\n        this.x = x\n        this.y = y\n        this.radius = r\n        this.color = this.getRandomColor()\n        this.ctx = context\n    }\n\n    getRandomColor () {\n        return '#000000'.replace(/0/g, () => (~~(Math.random() * 16)).toString(16))\n    }\n\n    setSpeed (vx, vy) {\n        this.vx = vx\n        this.vy = vy\n    }\n\n    get centerPoint () {\n        return {\n            x: this.x,\n            y: this.y\n        }\n    }\n\n    setPosition (x, y) {\n        this.x = x\n        this.y = y\n    }\n\n    move () {\n        this.x += this.vx\n        this.y += this.vy\n    }\n\n    draw () {\n        this.ctx.beginPath()\n        this.ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true)\n        this.ctx.closePath()\n        this.ctx.fillStyle = this.color\n        this.ctx.fill()\n    }\n}\n\nmodule.exports = Ball\n","const Ball = require('./Ball.js')\nconst utils = require('./utils')\n\nclass BallController {\n    constructor (context, canvas) {\n        this.ctx = context\n        this.canvas = canvas\n        this.balls = []\n    }\n\n    addBall (quantity = 1) {\n        let i = 0\n        while (i < quantity) {\n            let randRadius = utils.getRandomInt(10, 25)\n            let randomX = utils.getRandomInt(0 + randRadius, this.canvas.width - randRadius)\n            let randomY = utils.getRandomInt(0 + randRadius, this.canvas.height - randRadius)\n            let randSpeedX = utils.getRandomInt(3, 8)\n            let randSpeedY = utils.getRandomInt(3, 8)\n            let ball = new Ball(this.ctx, randomX, randomY, randRadius)\n            ball.setSpeed(randSpeedX, randSpeedY)\n            this.balls.push(ball)\n            i++\n        }\n    }\n\n    moveBalls () {\n        for (let ball of this.balls) {\n            if (ball.y + ball.vy + ball.radius > this.canvas.height || ball.y + ball.vy - ball.radius < 0) {\n                ball.vy = -ball.vy\n            }\n\n            if (ball.x + ball.vx + ball.radius > this.canvas.width || ball.x + ball.vx - ball.radius < 0) {\n                ball.vx = -ball.vx\n            }\n            ball.move()\n        }\n    }\n\n    detectColision () {\n        for (let ball of this.balls) {\n            let distance = utils.getDistanceBewteenPoints(this.staticBall.centerPoint, ball.centerPoint)\n            if (distance <= ball.radius + this.staticBall.radius) {\n                return true\n            }\n        }\n        return false\n    }\n\n    createStaticBall () {\n        this.staticBall = new Ball(this.ctx, 25, 25, 15)\n    }\n\n    moveBallOnMouseMove (e) {\n        let rect = this.canvas.getBoundingClientRect()\n        this.staticBall.setPosition(e.clientX - rect.left, e.clientY - rect.top)\n    }\n\n    render () {\n        for (let ball of this.balls) {\n            ball.draw()\n        }\n        this.staticBall.draw()\n    }\n}\n\nmodule.exports = BallController\n","const BallController = require('./BallController.js')\n\nclass Main {\n    constructor () {\n        this.canvas = document.getElementById('canvas')\n        this.spanScore = document.getElementById('span-balls')\n        this.ctx = this.canvas.getContext('2d')\n        this.ballCount = 3\n        this.increment = 1\n        this.runningTime = 0\n        this.running = false\n    }\n\n    setNewBallsController () {\n        this.controller = new BallController(this.ctx, this.canvas)\n    }\n\n    animate () {\n        this.ctx.fillStyle = 'rgba(255, 255, 255, 0.6)'\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\n        this.controller.moveBalls()\n        this.controller.render()\n        if (this.controller.detectColision()) {\n            this.running = false\n            this.ctx.fillStyle = 'rgba(255, 255, 255, 0.8)'\n            this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\n            this.ctx.fillStyle = '#FF0000'\n            this.ctx.font = '48px serif'\n            this.ctx.fillText('Game over', 0, 100)\n        } else {\n            window.requestAnimationFrame(() => this.animate())\n        }\n    }\n\n    runTimer () {\n        setTimeout(() => {\n            this.runningTime += 0.5\n            this.spanScore.innerHTML = this.runningTime * 2\n            if (this.running) {\n                this.runTimer()\n            }\n        }, 500)\n    }\n\n    addBallsInterval (interval) {\n        setTimeout(() => {\n            this.controller.addBall(this.increment)\n            this.ballCount += this.increment\n            this.increment++\n            if (this.running) {\n                this.addBallsInterval(interval)\n            }\n        }, interval)\n    }\n\n    startGame () {\n        if (this.running) return\n        this.running = true\n        this.setNewBallsController()\n        this.controller.addBall(this.ballCount)\n        this.controller.createStaticBall()\n        this.runTimer()\n        this.addBallsInterval(5000)\n        this.animate(this.controller)\n    }\n\n    restart () {\n        this.ballCount = 3\n        this.increment = 1\n        this.runningTime = 0\n        this.spanScore.innerHTML = 0\n        this.startGame()\n    }\n\n    start () {\n        // this.controller.addBall(this.ballCount)\n        // this.controller.createStaticBall()\n        // this.runTimer()\n        // this.addBallsInterval(5000)\n        // this.animate(this.controller)\n        this.startGame()\n        this.canvas.addEventListener('mousemove', e => this.controller.moveBallOnMouseMove(e))\n    }\n}\n\nlet main = new Main()\nmain.start()\ndocument.getElementById('btn-restart').addEventListener('click', e => main.restart())\n","class Utils {\n    /**\n     * Returns a random number between min (inclusive) and max (exclusive)\n     */\n    getRandomArbitrary (min, max) {\n        return Math.random() * (max - min) + min\n    }\n\n    /**\n     * Returns a random integer between min (inclusive) and max (inclusive)\n     * Using Math.round() will give you a non-uniform distribution!\n     */\n    getRandomInt (min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min\n    }\n\n    getDistanceBewteenPoints (a, b) {\n        return Math.hypot(a.x - b.x, a.y - b.y)\n    }\n}\n\nmodule.exports = new Utils()\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzdGF0aWMvc3JjL0JhbGwuanMiLCJzdGF0aWMvc3JjL0JhbGxDb250cm9sbGVyLmpzIiwic3RhdGljL3NyYy9hcHAuanMiLCJzdGF0aWMvc3JjL3V0aWxzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImNsYXNzIEJhbGwge1xuICAgIGNvbnN0cnVjdG9yIChjb250ZXh0LCB4LCB5LCByKSB7XG4gICAgICAgIHRoaXMueCA9IHhcbiAgICAgICAgdGhpcy55ID0geVxuICAgICAgICB0aGlzLnJhZGl1cyA9IHJcbiAgICAgICAgdGhpcy5jb2xvciA9IHRoaXMuZ2V0UmFuZG9tQ29sb3IoKVxuICAgICAgICB0aGlzLmN0eCA9IGNvbnRleHRcbiAgICB9XG5cbiAgICBnZXRSYW5kb21Db2xvciAoKSB7XG4gICAgICAgIHJldHVybiAnIzAwMDAwMCcucmVwbGFjZSgvMC9nLCAoKSA9PiAofn4oTWF0aC5yYW5kb20oKSAqIDE2KSkudG9TdHJpbmcoMTYpKVxuICAgIH1cblxuICAgIHNldFNwZWVkICh2eCwgdnkpIHtcbiAgICAgICAgdGhpcy52eCA9IHZ4XG4gICAgICAgIHRoaXMudnkgPSB2eVxuICAgIH1cblxuICAgIGdldCBjZW50ZXJQb2ludCAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgICAgICB5OiB0aGlzLnlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFBvc2l0aW9uICh4LCB5KSB7XG4gICAgICAgIHRoaXMueCA9IHhcbiAgICAgICAgdGhpcy55ID0geVxuICAgIH1cblxuICAgIG1vdmUgKCkge1xuICAgICAgICB0aGlzLnggKz0gdGhpcy52eFxuICAgICAgICB0aGlzLnkgKz0gdGhpcy52eVxuICAgIH1cblxuICAgIGRyYXcgKCkge1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKVxuICAgICAgICB0aGlzLmN0eC5hcmModGhpcy54LCB0aGlzLnksIHRoaXMucmFkaXVzLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSlcbiAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKClcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5jb2xvclxuICAgICAgICB0aGlzLmN0eC5maWxsKClcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFsbFxuIiwiY29uc3QgQmFsbCA9IHJlcXVpcmUoJy4vQmFsbC5qcycpXG5jb25zdCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKVxuXG5jbGFzcyBCYWxsQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IgKGNvbnRleHQsIGNhbnZhcykge1xuICAgICAgICB0aGlzLmN0eCA9IGNvbnRleHRcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXNcbiAgICAgICAgdGhpcy5iYWxscyA9IFtdXG4gICAgfVxuXG4gICAgYWRkQmFsbCAocXVhbnRpdHkgPSAxKSB7XG4gICAgICAgIGxldCBpID0gMFxuICAgICAgICB3aGlsZSAoaSA8IHF1YW50aXR5KSB7XG4gICAgICAgICAgICBsZXQgcmFuZFJhZGl1cyA9IHV0aWxzLmdldFJhbmRvbUludCgxMCwgMjUpXG4gICAgICAgICAgICBsZXQgcmFuZG9tWCA9IHV0aWxzLmdldFJhbmRvbUludCgwICsgcmFuZFJhZGl1cywgdGhpcy5jYW52YXMud2lkdGggLSByYW5kUmFkaXVzKVxuICAgICAgICAgICAgbGV0IHJhbmRvbVkgPSB1dGlscy5nZXRSYW5kb21JbnQoMCArIHJhbmRSYWRpdXMsIHRoaXMuY2FudmFzLmhlaWdodCAtIHJhbmRSYWRpdXMpXG4gICAgICAgICAgICBsZXQgcmFuZFNwZWVkWCA9IHV0aWxzLmdldFJhbmRvbUludCgzLCA4KVxuICAgICAgICAgICAgbGV0IHJhbmRTcGVlZFkgPSB1dGlscy5nZXRSYW5kb21JbnQoMywgOClcbiAgICAgICAgICAgIGxldCBiYWxsID0gbmV3IEJhbGwodGhpcy5jdHgsIHJhbmRvbVgsIHJhbmRvbVksIHJhbmRSYWRpdXMpXG4gICAgICAgICAgICBiYWxsLnNldFNwZWVkKHJhbmRTcGVlZFgsIHJhbmRTcGVlZFkpXG4gICAgICAgICAgICB0aGlzLmJhbGxzLnB1c2goYmFsbClcbiAgICAgICAgICAgIGkrK1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbW92ZUJhbGxzICgpIHtcbiAgICAgICAgZm9yIChsZXQgYmFsbCBvZiB0aGlzLmJhbGxzKSB7XG4gICAgICAgICAgICBpZiAoYmFsbC55ICsgYmFsbC52eSArIGJhbGwucmFkaXVzID4gdGhpcy5jYW52YXMuaGVpZ2h0IHx8IGJhbGwueSArIGJhbGwudnkgLSBiYWxsLnJhZGl1cyA8IDApIHtcbiAgICAgICAgICAgICAgICBiYWxsLnZ5ID0gLWJhbGwudnlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJhbGwueCArIGJhbGwudnggKyBiYWxsLnJhZGl1cyA+IHRoaXMuY2FudmFzLndpZHRoIHx8IGJhbGwueCArIGJhbGwudnggLSBiYWxsLnJhZGl1cyA8IDApIHtcbiAgICAgICAgICAgICAgICBiYWxsLnZ4ID0gLWJhbGwudnhcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhbGwubW92ZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZXRlY3RDb2xpc2lvbiAoKSB7XG4gICAgICAgIGZvciAobGV0IGJhbGwgb2YgdGhpcy5iYWxscykge1xuICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gdXRpbHMuZ2V0RGlzdGFuY2VCZXd0ZWVuUG9pbnRzKHRoaXMuc3RhdGljQmFsbC5jZW50ZXJQb2ludCwgYmFsbC5jZW50ZXJQb2ludClcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8PSBiYWxsLnJhZGl1cyArIHRoaXMuc3RhdGljQmFsbC5yYWRpdXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGNyZWF0ZVN0YXRpY0JhbGwgKCkge1xuICAgICAgICB0aGlzLnN0YXRpY0JhbGwgPSBuZXcgQmFsbCh0aGlzLmN0eCwgMjUsIDI1LCAxNSlcbiAgICB9XG5cbiAgICBtb3ZlQmFsbE9uTW91c2VNb3ZlIChlKSB7XG4gICAgICAgIGxldCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgdGhpcy5zdGF0aWNCYWxsLnNldFBvc2l0aW9uKGUuY2xpZW50WCAtIHJlY3QubGVmdCwgZS5jbGllbnRZIC0gcmVjdC50b3ApXG4gICAgfVxuXG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgZm9yIChsZXQgYmFsbCBvZiB0aGlzLmJhbGxzKSB7XG4gICAgICAgICAgICBiYWxsLmRyYXcoKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGljQmFsbC5kcmF3KClcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFsbENvbnRyb2xsZXJcbiIsImNvbnN0IEJhbGxDb250cm9sbGVyID0gcmVxdWlyZSgnLi9CYWxsQ29udHJvbGxlci5qcycpXG5cbmNsYXNzIE1haW4ge1xuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJylcbiAgICAgICAgdGhpcy5zcGFuU2NvcmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Bhbi1iYWxscycpXG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuICAgICAgICB0aGlzLmJhbGxDb3VudCA9IDNcbiAgICAgICAgdGhpcy5pbmNyZW1lbnQgPSAxXG4gICAgICAgIHRoaXMucnVubmluZ1RpbWUgPSAwXG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlXG4gICAgfVxuXG4gICAgc2V0TmV3QmFsbHNDb250cm9sbGVyICgpIHtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IEJhbGxDb250cm9sbGVyKHRoaXMuY3R4LCB0aGlzLmNhbnZhcylcbiAgICB9XG5cbiAgICBhbmltYXRlICgpIHtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC42KSdcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodClcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLm1vdmVCYWxscygpXG4gICAgICAgIHRoaXMuY29udHJvbGxlci5yZW5kZXIoKVxuICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyLmRldGVjdENvbGlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlXG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpJ1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodClcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICcjRkYwMDAwJ1xuICAgICAgICAgICAgdGhpcy5jdHguZm9udCA9ICc0OHB4IHNlcmlmJ1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFRleHQoJ0dhbWUgb3ZlcicsIDAsIDEwMClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hbmltYXRlKCkpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBydW5UaW1lciAoKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ydW5uaW5nVGltZSArPSAwLjVcbiAgICAgICAgICAgIHRoaXMuc3BhblNjb3JlLmlubmVySFRNTCA9IHRoaXMucnVubmluZ1RpbWUgKiAyXG4gICAgICAgICAgICBpZiAodGhpcy5ydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ydW5UaW1lcigpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDUwMClcbiAgICB9XG5cbiAgICBhZGRCYWxsc0ludGVydmFsIChpbnRlcnZhbCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlci5hZGRCYWxsKHRoaXMuaW5jcmVtZW50KVxuICAgICAgICAgICAgdGhpcy5iYWxsQ291bnQgKz0gdGhpcy5pbmNyZW1lbnRcbiAgICAgICAgICAgIHRoaXMuaW5jcmVtZW50KytcbiAgICAgICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEJhbGxzSW50ZXJ2YWwoaW50ZXJ2YWwpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGludGVydmFsKVxuICAgIH1cblxuICAgIHN0YXJ0R2FtZSAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHJldHVyblxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlXG4gICAgICAgIHRoaXMuc2V0TmV3QmFsbHNDb250cm9sbGVyKClcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmFkZEJhbGwodGhpcy5iYWxsQ291bnQpXG4gICAgICAgIHRoaXMuY29udHJvbGxlci5jcmVhdGVTdGF0aWNCYWxsKClcbiAgICAgICAgdGhpcy5ydW5UaW1lcigpXG4gICAgICAgIHRoaXMuYWRkQmFsbHNJbnRlcnZhbCg1MDAwKVxuICAgICAgICB0aGlzLmFuaW1hdGUodGhpcy5jb250cm9sbGVyKVxuICAgIH1cblxuICAgIHJlc3RhcnQgKCkge1xuICAgICAgICB0aGlzLmJhbGxDb3VudCA9IDNcbiAgICAgICAgdGhpcy5pbmNyZW1lbnQgPSAxXG4gICAgICAgIHRoaXMucnVubmluZ1RpbWUgPSAwXG4gICAgICAgIHRoaXMuc3BhblNjb3JlLmlubmVySFRNTCA9IDBcbiAgICAgICAgdGhpcy5zdGFydEdhbWUoKVxuICAgIH1cblxuICAgIHN0YXJ0ICgpIHtcbiAgICAgICAgLy8gdGhpcy5jb250cm9sbGVyLmFkZEJhbGwodGhpcy5iYWxsQ291bnQpXG4gICAgICAgIC8vIHRoaXMuY29udHJvbGxlci5jcmVhdGVTdGF0aWNCYWxsKClcbiAgICAgICAgLy8gdGhpcy5ydW5UaW1lcigpXG4gICAgICAgIC8vIHRoaXMuYWRkQmFsbHNJbnRlcnZhbCg1MDAwKVxuICAgICAgICAvLyB0aGlzLmFuaW1hdGUodGhpcy5jb250cm9sbGVyKVxuICAgICAgICB0aGlzLnN0YXJ0R2FtZSgpXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGUgPT4gdGhpcy5jb250cm9sbGVyLm1vdmVCYWxsT25Nb3VzZU1vdmUoZSkpXG4gICAgfVxufVxuXG5sZXQgbWFpbiA9IG5ldyBNYWluKClcbm1haW4uc3RhcnQoKVxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1yZXN0YXJ0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IG1haW4ucmVzdGFydCgpKVxuIiwiY2xhc3MgVXRpbHMge1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSByYW5kb20gbnVtYmVyIGJldHdlZW4gbWluIChpbmNsdXNpdmUpIGFuZCBtYXggKGV4Y2x1c2l2ZSlcbiAgICAgKi9cbiAgICBnZXRSYW5kb21BcmJpdHJhcnkgKG1pbiwgbWF4KSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gKGluY2x1c2l2ZSkgYW5kIG1heCAoaW5jbHVzaXZlKVxuICAgICAqIFVzaW5nIE1hdGgucm91bmQoKSB3aWxsIGdpdmUgeW91IGEgbm9uLXVuaWZvcm0gZGlzdHJpYnV0aW9uIVxuICAgICAqL1xuICAgIGdldFJhbmRvbUludCAobWluLCBtYXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW5cbiAgICB9XG5cbiAgICBnZXREaXN0YW5jZUJld3RlZW5Qb2ludHMgKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguaHlwb3QoYS54IC0gYi54LCBhLnkgLSBiLnkpXG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBVdGlscygpXG4iXX0="}